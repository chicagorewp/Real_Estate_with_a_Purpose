  <%= form_tag '/properties', method: :post do %>
<div class="top-search-bar">
    <div class="form-item">
      <%= text_field_tag :location, @just_location ? @just_location : nil, placeholder: "Address, neighborhood, zip", style: "width: 200px" %>
    </div>
    <div class="form-item">
      <%= text_field_tag :price_min, @price_min ? @price_min : nil, placeholder: "Price (min.)"%>
    </div>
    <div class="form-item">
      <%= text_field_tag :price_max, @price_max ? @price_max : nil, placeholder: "Price (max.)" %>
    </div>
    <div class="form-item">
      <%= text_field_tag :beds_min, @beds_min ? @beds_min : nil, placeholder: "Beds (min.)" %>
    </div>
    <div class="form-item">
      <%= text_field_tag :beds_max, @beds_max ? @beds_max : nil, placeholder: "Beds (max.)" %>
    </div>
    <div class="form-item">
      <%= text_field_tag :baths_min, @baths_min ? @baths_min : nil, placeholder: "Baths (min.)"%>
    </div>
    <div class="form-item">
      <%= text_field_tag :baths_max, @baths_max ? @baths_max : nil, placeholder: "Baths (max.)" %>
    </div>
    <div class="form-item">
      <%= submit_tag "Submit" %>
    </div>
</div>
<% end %>
<div class="main-details">
    <span class="address-info">
        <h3><%= @property["address"]["full"] %></h3>
        <h4><%= @property["address"]["city"] %>, <%= @property["address"]["state"] %></h4>
    </span>
    <span class="price-and-days">
        <h4>List price: <%= number_to_currency(@property["listPrice"]) %></h4>
        <h4>Days on market: <%= @days_on_market.to_i %></h4>
    </span>

</div>
  <div class="col-sm-8 col-sm-offset-2">
    <%= image_tag @property["photos"][0], id: "big-property-photo" %>
    <div class="property-photos">
        <% @property["photos"].each do |photo| %>
        <div class="property-photo-frame">
            <img src="<%= photo %>" class="small-property-photos", id="<%= @property["photos"].index(photo) %>">
        </div>
        <% end %>
    </div>
    <p>Image <span class="number-of-photos">1</span> of <%= @property["photos"].length %></p>
    <p>Beds: <%= @beds %> | Baths: <%= @baths %> </p>
    <p>List Price: <%= number_to_currency(@list_price) %></p>
    <p>List Date <%= @list_date %> </p>
  <% if current_user %>
      <div class="favorite">
        <% if @favorite %>
            <%= link_to "Remove from favorites", "/properties/#{@favorite.id}", class: "delete-favorite", method: :delete %>
        <% else %>
          <%= form_tag "/properties_favorite", method: :post do %>
              <% if @property["photos"][0] %>
                  <%= hidden_field_tag :image, @property["photos"][0] %>
              <% end %>
              <%= hidden_field_tag :line_1, @property["address"]["city"] %>
              <%= hidden_field_tag :state, @property["address"]["state"] %>
              <%= hidden_field_tag :api_address, @property["mlsId"] %>
              <%= hidden_field_tag :list_price, @property["listPrice"] %>
              <%= hidden_field_tag :line_2, @property["address"]["full"] %>
              <%= hidden_field_tag :num_bedrooms, @property["property"]["bedrooms"] %>
              <%= hidden_field_tag :num_bathrooms, @property["property"]["bathsFull"] %>
              <%= submit_tag "Add to Favorites!", class: "add-favorite" %>
          <% end %>
      <% end %>
      </div>
  <% end %>
    <h3> ************** PROPERTY OVERVIEW *************** </h3>

    <% if @property["remarks"] != nil %>
        <%= @property["remarks"] %>
    <% else %>
        <%= @property["privateRemarks"] %>
    <% end %>

    <h3> ************* PROPERTY DETAILS **************** </h3>

    <% @property.each do |category| %>
         <% category.each do |information| %>
            <% if information.nil? %>
                <p>  NO INFORMATION AVAILABLE </p>
            <% elsif information.is_a?(Hash) %>
                 <% information.each do |detail| %>
                    <% if detail[1] == nil %>
                        <p> <%= detail[0] %>: NO INFORMATION LISTED </p>
                    <% else %>
                        <p> <%= detail[0] %>: <%= detail[1] %> </p>
                    <% end %>
                <% end %>
            <% else %>
               <p> <%= information %> </p>
            <% end %>
        <% end %>
    <% end %>


    <%= image_tag @map_image %>

    </div>

</div>

